# Milestone v0.1: Core Installer

**Status:** ✅ SHIPPED 2026-02-24
**Phases:** 1–2
**Total Plans:** 6

## Overview

v0.1 establishes the full install pipeline for cc-templates — an npm CLI that fetches Claude Code components from GitHub and installs them into the user's `.claude/` directory. The package scaffold is correct and publishable, all four component types (skills, agents, commands, hooks) install end-to-end with safety guarantees, and the npm name `cc-templates` is confirmed available.

## Phases

### Phase 1: Scaffold

**Goal**: The npm package name is secured and the CLI is invocable with a correct package shape before any install logic is written
**Depends on**: Nothing (first phase)
**Plans**: 1 plan

Plans:

- [x] 01-01: Package scaffold, CLI entry point, component library seed, and catalog generation

**Details:**

Confirmed `cc-templates` npm name available (404 from registry). Created ESM CLI with commander 14 — `node bin/index.js --help` works with branded header, 5 flags, and examples. Seeded component library with 3 video skill.md files with YAML frontmatter. Wrote `scripts/build-catalog.js` that walks components/, validates frontmatter, writes `components.json`. Verified `npm pack --dry-run` lists only correct 5 files.

---

### Phase 2: Core Installer

**Goal**: Users can install any of the four component types via CLI flags with safety guarantees — no data loss, no silent overwrites, no Windows failures
**Depends on**: Phase 1
**Plans**: 5 plans

Plans:

- [x] 02-01: Foundation modules: fetch.js URL builder, output.js chalk helpers, catalog.js validator
- [x] 02-02: Single-file installers: agent.js and command.js (raw.githubusercontent.com fetch pattern)
- [x] 02-03: Skill directory installer: skill.js using GitHub Contents API recursive download
- [x] 02-04: Hook installer: hook.js with array-append deep-merge and atomic write to settings.json
- [x] 02-05: Orchestrator and CLI wiring: install.js multi-install dispatch, cli.js updated with all flags

**Details:**

Foundation modules established single-source-of-truth patterns (URLs through fetch.js, output through output.js, catalog validation through catalog.js). Single-file installers for agents and commands use `validate → conflict-check → fetch → write → report` pattern. Skill installer uses GitHub Contents API for recursive directory download (raw URLs don't work for directories). Hook installer uses write-file-atomic for atomic write, array-append merge (`[...existing, ...new]`) so user hooks are never clobbered, and word-boundary regex for python3→python on Windows. runInstall() orchestrator validates ALL component names before executing any installs (fail-fast), dispatches to per-type installers, exits 1 on first error.

---

## Milestone Summary

**Key Decisions:**

- ESM-only package (type:module); CJS-from-ESM interop via dynamic import + createRequire fallback (js-yaml, write-file-atomic)
- `components/` directory excluded from npm `files` — stays on GitHub, fetched at runtime
- `components.json` included in npm `files` — ships in package for instant offline listing
- GitHub Contents API required for skill directories (raw.githubusercontent.com is files-only)
- `SAFE-01` validate-first before any network call: fail fast with inline available-names list
- Array-append merge for hooks is non-negotiable: spread `[...existing, ...new]`, never assignment
- write-file-atomic for settings.json writes: temp file + rename, crash-proof
- `\bpython3\b` word-boundary regex for win32 python replacement (prevents path corruption)
- runInstall pre-validates ALL names before executing any installs (clean error upfront vs mid-run failure)
- `cc-templates` npm name confirmed available (npm view returned 404)

**Issues Resolved:**

- GitHub Contents API requirement discovered: raw URLs don't work for directories; skill installer updated to use `api.github.com/repos/.../contents/...`
- write-file-atomic CJS interop: direct ESM import works on Node 20+ but createRequire fallback added for compatibility
- Live GitHub smoke test returned 404 (repo not yet published) — installer correctly handles data-integrity case; all offline behaviors verified

**Issues Deferred:**

- `anthropics-community/cc-templates` GitHub repo not yet created — skill install end-to-end not verifiable until repo is published
- `settings.json` hooks schema confidence: MEDIUM — research note says verify against official Anthropic docs; no blocking issues found during implementation

**Technical Debt:**

- No HTTP retry or timeout in Phase 2 installers (explicitly deferred by plan spec) — Phase 4 Polish scope
- `--mcp` flag is "not yet implemented" stub — Phase 4 scope
- `--list` and no-flags (interactive menu) are stubs — Phase 3 scope
- `--dry-run` and stale-version check not implemented — Phase 4 scope

---

_For current project status, see .planning/ROADMAP.md_
