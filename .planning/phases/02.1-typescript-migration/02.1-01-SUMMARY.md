---
phase: 02.1-typescript-migration
plan: "01"
subsystem: infra
tags: [typescript, eslint, tsc, tsconfig, eslint-flat-config, build]

# Dependency graph
requires: []
provides:
  - tsconfig.json with NodeNext ESM strict mode targeting Node 22
  - eslint.config.js with typescript-eslint flat config (ESLint v9+)
  - package.json scripts: build runs catalog+tsc, lint runs eslint, prepublishOnly
  - package.json files field ships dist/ not src/
  - devDependencies: typescript, @types/node@22, @types/js-yaml, @types/write-file-atomic, eslint, @eslint/js, typescript-eslint
  - dist/ listed in .gitignore
affects: [02.1-typescript-migration]

# Tech tracking
tech-stack:
  added: [typescript 5.9.3, eslint 10.0.2, @eslint/js, typescript-eslint 8.56.1, @types/node@22, @types/js-yaml, @types/write-file-atomic]
  patterns: [tsc-only build (no esbuild/tsup), ESLint v9 flat config, NodeNext module resolution, strict TypeScript]

key-files:
  created: [tsconfig.json, eslint.config.js]
  modified: [package.json, .gitignore]

key-decisions:
  - "Used tsc as sole build tool — no esbuild or tsup, per project decision"
  - "eslint.config.js as plain .js file (package.json type:module makes it ESM automatically)"
  - "build script preserves existing catalog generation: node scripts/build-catalog.js && tsc"
  - "engines updated from >=20 to >=22 to match Node 22 type targeting"

patterns-established:
  - "tsconfig: NodeNext module+moduleResolution pair for ESM Node compatibility"
  - "tsconfig: src/ as rootDir, dist/ as outDir with declaration+declarationMap enabled"
  - "eslint: flat config (eslint.config.js) importing from typescript-eslint, no Prettier"

requirements-completed: []

# Metrics
duration: 2min
completed: 2026-02-24
---

# Phase 2.1 Plan 01: TypeScript Build Foundation Summary

**TypeScript 5.9 + ESLint 10 toolchain installed with NodeNext strict tsconfig and typescript-eslint flat config; package.json updated to ship dist/ and run tsc on build**

## Performance

- **Duration:** 2 min
- **Started:** 2026-02-24T17:04:43Z
- **Completed:** 2026-02-24T17:06:22Z
- **Tasks:** 2
- **Files modified:** 4 (tsconfig.json created, eslint.config.js created, package.json updated, .gitignore updated)

## Accomplishments
- Installed 7 devDependencies (typescript, @types/node@22, @types/js-yaml, @types/write-file-atomic, eslint, @eslint/js, typescript-eslint) with zero vulnerabilities
- Created tsconfig.json with NodeNext/strict/outDir:dist settings, targeting ES2023
- Created eslint.config.js using ESLint v9 flat config format with typescript-eslint recommended rules
- Updated package.json: build script chains catalog generation with tsc, lint script added, files ships dist/ not src/, engines bumped to >=22
- Added dist/ to .gitignore

## Task Commits

Each task was committed atomically:

1. **Task 1: Install devDependencies** - `0195b36` (chore)
2. **Task 2: Create tsconfig.json, eslint.config.js, update package.json scripts and .gitignore** - `a0d79e8` (feat)

**Plan metadata:** (docs commit follows)

## Files Created/Modified
- `tsconfig.json` - TypeScript compiler config: NodeNext ESM, strict, rootDir src/, outDir dist/, declaration+declarationMap enabled
- `eslint.config.js` - ESLint v9 flat config importing @eslint/js and typescript-eslint recommended rules
- `package.json` - build script now runs catalog+tsc, lint script added, files ships dist/ not src/, engines updated to >=22, devDependencies added
- `.gitignore` - dist/ added to prevent compiled output from being tracked

## Decisions Made
- Used `tsc` as the sole build tool — no esbuild or tsup, per the established project decision
- `eslint.config.js` as a plain `.js` file: since `package.json` has `"type": "module"`, the file is automatically treated as ESM — no `.mjs` needed
- `build` script preserves the existing catalog generation step: `node scripts/build-catalog.js && tsc`
- `engines` bumped from `>=20` to `>=22` to match the Node 22 @types target

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered
- Node's `-e` eval flag had shell escaping issues with `!` character in bash heredoc on Windows — worked around by reading package.json directly with the Read tool to verify devDependencies. All values confirmed present.

## User Setup Required
None - no external service configuration required.

## Next Phase Readiness
- Build foundation is complete; the TypeScript compiler is installed and configured
- ESLint is configured and ready to run against TypeScript source
- Next step: Plan 02 — rename all src/*.js files to .ts and migrate source to TypeScript, fixing type errors under strict mode
- No blockers: all config files valid, devDependencies installed cleanly

## Self-Check: PASSED

- FOUND: tsconfig.json
- FOUND: eslint.config.js
- FOUND: .planning/phases/02.1-typescript-migration/02.1-01-SUMMARY.md
- FOUND: commit 0195b36 (chore: install devDependencies)
- FOUND: commit a0d79e8 (feat: build config files)

---
*Phase: 02.1-typescript-migration*
*Completed: 2026-02-24*
