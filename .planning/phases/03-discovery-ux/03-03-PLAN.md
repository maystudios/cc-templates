---
phase: 03-discovery-ux
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/installers/skill.ts
  - src/installers/agent.ts
  - src/installers/command.ts
  - src/installers/hook.ts
autonomous: true
requirements:
  - DISC-03

must_haves:
  truths:
    - "After a successful install, the terminal output includes the component author's name"
    - "Success line format: '✓ <name> installed to <path>  by <author>' when author is present"
    - "When author is null or empty, the success line shows without the 'by' suffix"
    - "No 'output.hint()' calls remain in any of the four installers"
  artifacts:
    - path: "src/installers/skill.ts"
      provides: "Author attribution on skill install; output.hint() removed"
      contains: "by ${entry.author}"
    - path: "src/installers/agent.ts"
      provides: "Author attribution on agent install; output.hint() removed"
      contains: "by ${entry.author}"
    - path: "src/installers/command.ts"
      provides: "Author attribution on command install; output.hint() removed"
      contains: "by ${entry.author}"
    - path: "src/installers/hook.ts"
      provides: "Author attribution on hook install; output.hint() removed"
      contains: "by ${entry.author}"
  key_links:
    - from: "src/installers/skill.ts"
      to: "src/catalog.ts"
      via: "validateName() return value used for author field"
      pattern: "validateName\\('skill'"
    - from: "src/installers/agent.ts"
      to: "src/catalog.ts"
      via: "validateName() return value used for author field"
      pattern: "validateName\\('agent'"
---

<objective>
Update all four installers to display author attribution on successful install and remove output.hint() calls.

Purpose: Satisfies DISC-03 — after install, the terminal shows "✓ <name> installed to <path>  by <author>". Removes the Phase 2 hint lines ("Use this skill in Claude Code with /name") per the locked decision: no next-step hints or usage suggestions.
Output: Four updated installer files with author suffix on success line and no hint() calls.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/03-discovery-ux/03-CONTEXT.md
@.planning/phases/03-discovery-ux/03-RESEARCH.md
@src/installers/skill.ts
@src/installers/agent.ts
@src/installers/command.ts
@src/installers/hook.ts
@src/catalog.ts
@src/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update skill and agent installers — author attribution + remove hints</name>
  <files>src/installers/skill.ts, src/installers/agent.ts</files>
  <action>
    **src/installers/skill.ts — two changes:**

    1. Capture the return value of validateName() (it already returns `CatalogEntry` — just use the return value instead of discarding it):
       - Change: `validateName('skill', name);`
       - To: `const entry = validateName('skill', name);`

    2. Replace the success + hint lines at the bottom of installSkill():
       - Remove: `output.success(`Installed ${name} skill to ${displayPath}`);`
       - Remove: `output.hint(`Use this skill in Claude Code with /${name}`);`
       - Add:
         ```typescript
         const authorSuffix = entry.author ? `  by ${entry.author}` : '';
         output.success(`${name} installed to ${displayPath}${authorSuffix}`);
         ```

    **src/installers/agent.ts — same two changes:**

    1. Capture validateName return value:
       - Change: `validateName('agent', name);`
       - To: `const entry = validateName('agent', name);`

    2. Replace success + hint lines:
       - Remove: `output.success(`Installed ${name} agent to ${displayPath}`);`
       - Remove: `output.hint(`Use this agent in Claude Code with @${name}`);`
       - Add:
         ```typescript
         const authorSuffix = entry.author ? `  by ${entry.author}` : '';
         output.success(`${name} installed to ${displayPath}${authorSuffix}`);
         ```

    **Note:** `output.hint` import may remain in the file's module scope if other code uses it. Since no other code in these files uses `output.hint`, the TypeScript compiler will not complain about an unused import (output is an object, not an individual import). No need to touch the import line.

    Do NOT change any other logic in these files — conflict checks, download logic, mkdirSync, writeFileSync all remain identical.
  </action>
  <verify>
    <automated>npm run build 2>&1 | grep -E "(error TS|skill\.ts|agent\.ts)" | head -10 || echo "clean"</automated>
    <manual>grep for "output.hint" in skill.ts and agent.ts — should return nothing</manual>
  </verify>
  <done>skill.ts and agent.ts compile clean; no output.hint() calls remain; entry.author used for authorSuffix</done>
</task>

<task type="auto">
  <name>Task 2: Update command and hook installers — author attribution + remove hints</name>
  <files>src/installers/command.ts, src/installers/hook.ts</files>
  <action>
    **src/installers/command.ts — two changes:**

    1. Capture validateName return value:
       - Change: `validateName('command', name);`
       - To: `const entry = validateName('command', name);`

    2. Replace success + hint lines:
       - Remove: `output.success(`Installed ${name} command to ${displayPath}`);`
       - Remove: `output.hint(`Use this command in Claude Code with /${name}`);`
       - Add:
         ```typescript
         const authorSuffix = entry.author ? `  by ${entry.author}` : '';
         output.success(`${name} installed to ${displayPath}${authorSuffix}`);
         ```

    **src/installers/hook.ts — one change only (hook has no hint() call to remove, and no displayPath in the same pattern):**

    The hook installer does NOT currently call `output.hint()` — its success line is:
    `output.success(`Added ${keyList} hook to settings.json`);`

    For hook, the author attribution approach is different because hook success output reports event keys (e.g., "PostToolUse"), not a component name. The author field is still available from validateName(). Apply author attribution to the hook success line:

    1. Capture validateName return value:
       - Change: `validateName('hook', name);`
       - To: `const entry = validateName('hook', name);`

    2. Update the success line to include author:
       - Change: `output.success(`Added ${keyList} hook to settings.json`);`
       - To:
         ```typescript
         const authorSuffix = entry.author ? `  by ${entry.author}` : '';
         output.success(`${name} hook added to settings.json${authorSuffix}`);
         ```

    Note: The hook success message is restructured slightly — from `Added ${keyList} hook to settings.json` to `${name} hook added to settings.json${authorSuffix}` — this is cleaner and consistent with the other installers' format.

    Do NOT modify the verbose output or the addedKeys loop in hook.ts — those are unchanged.
  </action>
  <verify>
    <automated>npm run build 2>&1 | grep -E "(error TS|command\.ts|hook\.ts)" | head -10 || echo "clean"</automated>
    <manual>grep for "output.hint" in command.ts and hook.ts — should return nothing; grep "authorSuffix" in hook.ts should find it</manual>
  </verify>
  <done>command.ts and hook.ts compile clean; no output.hint() remains in command.ts; hook.ts has authorSuffix on success line; all four installers use entry.author</done>
</task>

</tasks>

<verification>
1. `npm run build` passes with zero TypeScript errors across all four installer files
2. `grep -r "output.hint" src/installers/` returns no matches
3. `grep -r "authorSuffix" src/installers/` returns matches in all four files
4. `grep -r "const entry = validateName" src/installers/` returns matches in all four files
5. Success message format for skill/agent/command: `${name} installed to ${displayPath}${authorSuffix}`
6. Success message format for hook: `${name} hook added to settings.json${authorSuffix}`
</verification>

<success_criteria>
- All four installers capture the CatalogEntry returned by validateName()
- All four installers append `  by ${entry.author}` to success line when author is non-null
- Author suffix is omitted (empty string) when author is null or empty
- output.hint() calls are removed from skill.ts, agent.ts, and command.ts
- hook.ts never had output.hint() — confirmed unchanged on that front
- npm run build passes cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/03-discovery-ux/03-03-SUMMARY.md` with:
- Confirmation all four installers updated
- Note on hook.ts success message format change
- Confirmation output.hint() calls removed from skill/agent/command
- npm run build result
</output>
